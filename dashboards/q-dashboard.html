<!DOCTYPE html>
<html>
<head>
    <title>ü¶Ü HELIX Quiescence Dashboard</title>
    <style>
        body { font-family: 'Courier New', monospace; background: #0a0a0a; color: #00ffaa; padding: 20px; }
        .q1 { color: #00aaff; border-left: 5px solid #00aaff; padding-left: 10px; }
        .q2 { color: #aaff00; border-left: 5px solid #aaff00; padding-left: 10px; }
        .q3 { color: #ffaa00; border-left: 5px solid #ffaa00; padding-left: 10px; }
        .q4 { color: #ff00aa; border-left: 5px solid #ff00aa; padding-left: 10px; }
        .event { margin: 10px 0; padding: 10px; background: rgba(0,0,0,0.3); }
        .stats { display: flex; gap: 20px; margin: 20px 0; }
        .stat-box { padding: 15px; background: rgba(0,255,170,0.1); border-radius: 5px; }
    </style>
</head>
<body>
    <h1>ü¶Ü HELIX Quiescence Dashboard</h1>
    <div id="status">Loading...</div>
    <div class="stats" id="stats"></div>
    <div id="events"></div>
    
    <script>
        async function update() {
            try {
                const response = await fetch('/api/q-events');
                const events = await response.json();
                
                // Update stats
                const stats = events.reduce((acc, e) => {
                    acc[e.marker] = (acc[e.marker] || 0) + 1;
                    return acc;
                }, {});
                
                document.getElementById('stats').innerHTML = `
                    <div class="stat-box">Q‚ÇÅ: ${stats['Q‚ÇÅ'] || 0}</div>
                    <div class="stat-box">Q‚ÇÇ: ${stats['Q‚ÇÇ'] || 0}</div>
                    <div class="stat-box">Q‚ÇÉ: ${stats['Q‚ÇÉ'] || 0}</div>
                    <div class="stat-box">Q‚ÇÑ: ${stats['Q‚ÇÑ'] || 0}</div>
                `;
                
                // Update events
                document.getElementById('events').innerHTML = events
                    .slice(-10)
                    .map(e => `<div class="event ${e.marker.toLowerCase()}">
                        <strong>${e.timestamp}</strong> ${e.marker}: ${e.state}
                        ${e.signal ? ` ${e.signal}` : ''}
                        ${e.drift ? ` (Drift: ${e.drift})` : ''}
                    </div>`)
                    .join('');
                    
                document.getElementById('status').innerHTML = `Last updated: ${new Date().toISOString()}`;
            } catch (e) {
                document.getElementById('status').innerHTML = `Error: ${e.message}`;
            }
        }
        
        update();
        setInterval(update, 5000);
    </script>
</body>
</html>
